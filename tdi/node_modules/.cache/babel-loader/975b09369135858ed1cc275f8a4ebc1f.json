{"ast":null,"code":"import { ADD_SCORE, DEL_SCORE } from './actions';\nconst initialState = {\n  /**\n   * Players scores [{Object}]\n   *\n   * @param      {String}  {name}\n   * @param      {Number}  {nbTry}\n   * @param       {Number} {nbToFind}\n   */\n  scores: []\n};\n\nconst arrayHasIndex = (array, index) => Array.isArray(array) && array.hasOwnProperty(index);\n\nexport default function reducers(state = initialState, action) {\n  console.log('reducers', action.type);\n\n  switch (action.type) {\n    case ADD_SCORE:\n      //const newScore = state.scores.findIndex(item=> item.id===action.value.id);\n      //if ()\n      //return { ...state, scores: [ ...state.scores, action.score ] };\n\n      /*return { ...state, scores: [ ...state.scores, action.score ].sort(\n          function(a, b) {\n              if (a[action.score.nbTry] === b[action.score.nbTry]) {\n                  return 0;\n              }\n              else {\n                  return (a[action.score.nbTry]<b[action.score.nbTry]) ? -1: 1;\n              }\n          })\n      };*/\n      if ([...state.scores, action.score].length > 5) {\n        return { ...state,\n          scores: [...state.scores, action.score].sort((a, b) => {\n            if (b.nbTry === -1 || a.nbTry < b.nbTry && a.nbTry > 0 && b.nbTry > 0) {\n              return -1;\n            } else if (a.nbTry < b.nbTry && a.nbTry > 0 && b.nbTry > 0) {\n              return +1;\n            } else {\n              return 0;\n            }\n          }).pop()\n        };\n      } else {\n        return { ...state,\n          scores: [...state.scores, action.score].sort((a, b) => {\n            if (b.nbTry === -1 || a.nbTry < b.nbTry && a.nbTry > 0 && b.nbTry > 0) {\n              return -1;\n            } else if (a.nbTry < b.nbTry && a.nbTry > 0 && b.nbTry > 0) {\n              return +1;\n            } else {\n              return 0;\n            }\n          })\n        };\n      }\n\n    case DEL_SCORE:\n      if (arrayHasIndex(state.scores, action.index)) {\n        return { ...state,\n          scores: [...state.scores.filter((score, index) => index !== action.index)]\n        };\n      }\n\n      return state;\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/Users/Gwenael/Documents/cours/L1/fevrier_JavaPOO2_Js2/Js2/git/JS-avanc-/tdi/src/redux/reducers.js"],"names":["ADD_SCORE","DEL_SCORE","initialState","scores","arrayHasIndex","array","index","Array","isArray","hasOwnProperty","reducers","state","action","console","log","type","score","length","sort","a","b","nbTry","pop","filter"],"mappings":"AAAA,SACIA,SADJ,EAEIC,SAFJ,QAGO,WAHP;AAKA,MAAMC,YAAY,GAAG;AACjB;;;;;;;AAOAC,EAAAA,MAAM,EAAE;AARS,CAArB;;AAaA,MAAMC,aAAa,GAAG,CAACC,KAAD,EAAQC,KAAR,KAAkBC,KAAK,CAACC,OAAN,CAAcH,KAAd,KAAwBA,KAAK,CAACI,cAAN,CAAqBH,KAArB,CAAhE;;AAEA,eAAe,SAASI,QAAT,CAAkBC,KAAK,GAAGT,YAA1B,EAAwCU,MAAxC,EAAgD;AAC3DC,EAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBF,MAAM,CAACG,IAA/B;;AACA,UAAQH,MAAM,CAACG,IAAf;AAEI,SAAKf,SAAL;AACI;AACA;AAEA;;AACA;;;;;;;;;;AAUA,UAAI,CAAE,GAAGW,KAAK,CAACR,MAAX,EAAmBS,MAAM,CAACI,KAA1B,EAAkCC,MAAlC,GAAyC,CAA7C,EAA+C;AAC/C,eAAO,EAAE,GAAGN,KAAL;AAAYR,UAAAA,MAAM,EAAE,CAAE,GAAGQ,KAAK,CAACR,MAAX,EAAmBS,MAAM,CAACI,KAA1B,EAAkCE,IAAlC,CAAuC,CAACC,CAAD,EAAGC,CAAH,KAAO;AACrE,gBAAIA,CAAC,CAACC,KAAF,KAAU,CAAC,CAAX,IAAiBF,CAAC,CAACE,KAAF,GAAUD,CAAC,CAACC,KAAZ,IAAqBF,CAAC,CAACE,KAAF,GAAQ,CAA7B,IAAkCD,CAAC,CAACC,KAAF,GAAQ,CAA/D,EAAkE;AAC9D,qBAAO,CAAC,CAAR;AACH,aAFD,MAGK,IAAGF,CAAC,CAACE,KAAF,GAAUD,CAAC,CAACC,KAAZ,IAAqBF,CAAC,CAACE,KAAF,GAAQ,CAA7B,IAAkCD,CAAC,CAACC,KAAF,GAAQ,CAA7C,EAA+C;AAChD,qBAAO,CAAC,CAAR;AACH,aAFI,MAGA;AACD,qBAAO,CAAP;AACH;AACA,WAVsB,EAUpBC,GAVoB;AAApB,SAAP;AAWG,OAZH,MAaI;AACA,eAAO,EAAE,GAAGX,KAAL;AAAYR,UAAAA,MAAM,EAAE,CAAE,GAAGQ,KAAK,CAACR,MAAX,EAAmBS,MAAM,CAACI,KAA1B,EAAkCE,IAAlC,CAAuC,CAACC,CAAD,EAAGC,CAAH,KAAO;AACjE,gBAAIA,CAAC,CAACC,KAAF,KAAU,CAAC,CAAX,IAAiBF,CAAC,CAACE,KAAF,GAAUD,CAAC,CAACC,KAAZ,IAAqBF,CAAC,CAACE,KAAF,GAAQ,CAA7B,IAAkCD,CAAC,CAACC,KAAF,GAAQ,CAA/D,EAAkE;AAC9D,qBAAO,CAAC,CAAR;AACH,aAFD,MAGK,IAAGF,CAAC,CAACE,KAAF,GAAUD,CAAC,CAACC,KAAZ,IAAqBF,CAAC,CAACE,KAAF,GAAQ,CAA7B,IAAkCD,CAAC,CAACC,KAAF,GAAQ,CAA7C,EAA+C;AAChD,qBAAO,CAAC,CAAR;AACH,aAFI,MAGA;AACD,qBAAO,CAAP;AACH;AACJ,WAVsB;AAApB,SAAP;AAYH;;AAIL,SAAKpB,SAAL;AACI,UAAIG,aAAa,CAACO,KAAK,CAACR,MAAP,EAAeS,MAAM,CAACN,KAAtB,CAAjB,EAA+C;AAC3C,eAAO,EAAE,GAAGK,KAAL;AAAYR,UAAAA,MAAM,EAAE,CAAE,GAAGQ,KAAK,CAACR,MAAN,CAAaoB,MAAb,CAAoB,CAACP,KAAD,EAAQV,KAAR,KAAkBA,KAAK,KAAKM,MAAM,CAACN,KAAvD,CAAL;AAApB,SAAP;AACH;;AACD,aAAOK,KAAP;;AAEJ;AACI,aAAOA,KAAP;AAtDR;AAwDH","sourcesContent":["import {\n    ADD_SCORE,\n    DEL_SCORE\n} from './actions'\n\nconst initialState = {\n    /**\n     * Players scores [{Object}]\n     *\n     * @param      {String}  {name}\n     * @param      {Number}  {nbTry}\n     * @param       {Number} {nbToFind}\n     */\n    scores: []\n};\n\n\n\nconst arrayHasIndex = (array, index) => Array.isArray(array) && array.hasOwnProperty(index);\n\nexport default function reducers(state = initialState, action) {\n    console.log('reducers', action.type);\n    switch (action.type) {\n\n        case ADD_SCORE:\n            //const newScore = state.scores.findIndex(item=> item.id===action.value.id);\n            //if ()\n\n            //return { ...state, scores: [ ...state.scores, action.score ] };\n            /*return { ...state, scores: [ ...state.scores, action.score ].sort(\n                function(a, b) {\n                    if (a[action.score.nbTry] === b[action.score.nbTry]) {\n                        return 0;\n                    }\n                    else {\n                        return (a[action.score.nbTry]<b[action.score.nbTry]) ? -1: 1;\n                    }\n                })\n            };*/\n            if ([ ...state.scores, action.score ].length>5){\n            return { ...state, scores: [ ...state.scores, action.score ].sort((a,b)=>{\n                if (b.nbTry===-1 || (a.nbTry < b.nbTry && a.nbTry>0 && b.nbTry>0)){\n                    return -1;\n                }\n                else if(a.nbTry < b.nbTry && a.nbTry>0 && b.nbTry>0){\n                    return +1\n                }\n                else {\n                    return 0;\n                }\n                }).pop()\n            };}\n            else{\n                return { ...state, scores: [ ...state.scores, action.score ].sort((a,b)=>{\n                        if (b.nbTry===-1 || (a.nbTry < b.nbTry && a.nbTry>0 && b.nbTry>0)){\n                            return -1;\n                        }\n                        else if(a.nbTry < b.nbTry && a.nbTry>0 && b.nbTry>0){\n                            return +1\n                        }\n                        else {\n                            return 0;\n                        }\n                    })\n                }\n            }\n\n\n\n        case DEL_SCORE:\n            if (arrayHasIndex(state.scores, action.index)) {\n                return { ...state, scores: [ ...state.scores.filter((score, index) => index !== action.index) ] };\n            }\n            return state;\n\n        default:\n            return state;\n    }\n}\n"]},"metadata":{},"sourceType":"module"}